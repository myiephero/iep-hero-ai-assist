Youâ€™re absolutely right â€” thank you for that. Hereâ€™s the final, clear, role-specified version of the Smart Letter Generator bug report:

â¸»

ğŸ Bug: Smart Letter Generator â€œSave to Vaultâ€ Button Not Working (Parent + Advocate Sides)

Submit To: ğŸŸ£ Replit Agent
Labels: bug, smart-letter-generator, document-vault, parent-side, advocate-side, priority:high

â¸»

ğŸ” Summary

The â€œSave to Vaultâ€ button within the Smart Letter Generator fails to function across both Parent and Advocate dashboards. This is a critical system-wide issue, as it prevents saving generated letters into the Vault.

â¸»

âŒ Current Behavior (Both Roles)
	â€¢	Button visually appears but does not trigger any action
	â€¢	No document is saved to Supabase
	â€¢	No network request or feedback is observed
	â€¢	Users receive no success/failure indication
	â€¢	They are left assuming it worked (but it didnâ€™t)

â¸»

âœ… Expected Behavior
	â€¢	Authenticated users should trigger a POST request to:

/api/documents/generate


	â€¢	Payload should include:

{
  "user_id": "<from session>",
  "student_id": "<selected student>",
  "template": "Prior Written Notice",
  "content": "Letter content here..."
}


	â€¢	On success:
	â€¢	Letter is inserted into documents table in Supabase
	â€¢	Vault immediately displays the document at the top
	â€¢	Toast confirms: "Letter saved to Vault for Kim Chee!"

â¸»

ğŸ›  Developer Instructions
	â€¢	Ensure supabase.auth.getSession() is available and returns a valid access_token
	â€¢	Button should not be clickable if user is not authenticated
	â€¢	Add toast/alert feedback for success/failure
	â€¢	Order Vault by created_at DESC to show new docs at top

â¸»

ğŸ§ª Steps to Reproduce (Parent & Advocate)
	1.	Login as either:
	â€¢	ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ parent@demo.com / demo123
	â€¢	ğŸ§‘â€ğŸ« advocate@demo.com / demo123
	2.	Go to Smart Letter Generator
	3.	Fill in and generate a letter
	4.	Click â€œSave to Vaultâ€
	5.	Observe: no confirmation, document does not appear in Vault

â¸»

Let me know when youâ€™re ready for the next issue format â€” I can generate your QA tracker next if youâ€™d like to clean house after these.